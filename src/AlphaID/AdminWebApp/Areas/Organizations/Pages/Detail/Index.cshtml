@page
@model IndexModel
@inject OrganizationMemberManager memberManager

@{
    this.ViewBag.Title = this.Model.Organization.Name;
    var members = await this.memberManager.GetMembersAsync(this.Model.Organization);
}

<h2>Overview</h2>
<div class="card mb-3">
    <div class="card-header">
        <h3 class="card-title">Base info</h3>
    </div>
    <div class="card-body">
        <div class="datagrid">
            <div class="datagrid-item">
                <div class="datagrid-title">@localizer["Name"]</div>
                <div class="datagrid-content">
                    @Model.Organization.Name
                    <a asp-page="ChangeName" asp-route-anchor="@Model.Organization.Id" class="btn btn-sm">@localizer["Change name"]</a>
                </div>
            </div>
            <div class="datagrid-item">
                <div class="datagrid-title">@localizer["Used name"]</div>
                <div class="datagrid-content">
                    @foreach (var usedName in this.Model.Organization.UsedNames.OrderByDescending(p => p.DeprecateTime).Take(2))
                    {
                        <p class="text-muted small">@Html.DisplayFor(m => usedName)</p>
                    }
                </div>
            </div>
            <div class="datagrid-item">
                <div class="datagrid-title">@localizer["USCI"]</div>
                <div class="datagrid-content">@Model.Organization.USCI</div>
            </div>
            <div class="datagrid-item">
                <div class="datagrid-title">@localizer["Domicile"]</div>
                <div class="datagrid-content">@Model.Organization.Domicile</div>
            </div>
            <div class="datagrid-item">
                <div class="datagrid-title">@localizer["Contact"]</div>
                <div class="datagrid-content">@Model.Organization.Contact</div>
            </div>
            <div class="datagrid-item">
                <div class="datagrid-title">@localizer["Representative"]</div>
                <div class="datagrid-content">@Model.Organization.Representative</div>
            </div>
            <div class="datagrid-item">
                <div class="datagrid-title">@localizer["Established At"]</div>
                <div class="datagrid-content">@Model.Organization.EstablishedAt?.ToShortDateString()</div>
            </div>
            <div class="datagrid-item">
                <div class="datagrid-title">@localizer["Business term"]</div>
                <div class="datagrid-content">@Model.Organization.TermBegin?.ToShortDateString() - @Model.Organization.TermEnd?.ToShortDateString()</div>
            </div>
            <div class="datagrid-item">
                <div class="datagrid-title">@localizer["Status"]</div>
                <div class="datagrid-content">@Model.Organization.Enabled</div>
            </div>
            <div class="datagrid-item">
                <div class="datagrid-title">@localizer["Website"]</div>
                <div class="datagrid-content"><a href="@Model.Organization.Website">@Model.Organization.Website</a></div>
            </div>
            <div class="datagrid-item">
                <div class="datagrid-title">@localizer["Members"]</div>
                <div class="datagrid-content">@members.Count()</div>
            </div>
        </div>
    </div>
</div>

<div class="card">
    <div class="card-header">
        <h3>@localizer["Invoice title"]</h3>
    </div>
    <div class="card-body">
        <div class="datagrid">
            <div class="datagrid-item">
                <div class="datagrid-title">@localizer["Name"]</div>
                <div class="datagrid-content"></div>
            </div>
            <div class="datagrid-item">
                <div class="datagrid-title">@localizer["USCI"]</div>
                <div class="datagrid-content"></div>
            </div>
            <div class="datagrid-item">
                <div class="datagrid-title">@localizer["Address and contact"]</div>
                <div class="datagrid-content"></div>
            </div>
            <div class="datagrid-item">
                <div class="datagrid-title">@localizer["Bank and Account"]</div>
                <div class="datagrid-content"></div>
            </div>
        </div>
    </div>
</div>
<p><a asp-page="Edit" asp-route-anchor="@Model.Organization.Id" class="btn btn-primary">@localizer["Edit"]</a></p>


<p></p>
<dl class="row">
    <dt class="col-4">@localizer["Created at"]</dt>
    <dd class="col-8">@Model.Organization.WhenCreated</dd>
    <dt class="col-4">@localizer["Changed at"]</dt>
    <dd class="col-8">@Model.Organization.WhenChanged</dd>
</dl>

<hr />
<p><a asp-page="Delete" asp-route-anchor="@Model.Organization.Id" class="btn btn-danger">@localizer["Delete organization"]</a></p>